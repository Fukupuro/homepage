<%= form_with(model: [:admin, blog]) do |f| %>
  <% if blog.errors.any? %>
    <div style="color: red;">
      <h2><%= blog.errors.count %>件のエラーがあります</h2>
      <ul>
        <% blog.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= f.label :title, "タイトル" %><br>
    <%= f.text_field :title, size: 60 %>
  </div>

  <div>
    <%= f.label :description, "概要" %><br>
    <%= f.text_area :description, rows: 3, cols: 60 %>
  </div>

  <div>
    <%= f.label :content, "本文" %><br>
    <%= f.text_area :content, rows: 15, cols: 60 %>
  </div>

  <div>
    <%= f.label :author, "著者" %><br>
    <%= f.text_field :author %>
  </div>

  <div>
    <%= f.label :published_at, "公開日" %><br>
    <%= f.datetime_local_field :published_at %>
  </div>

  <div>
    <%= f.label :header_image, "ヘッダー画像" %><br>
    <% if blog.header_image.attached? %>
      <p><%= image_tag blog.header_image, style: "max-width: 200px;" %></p>
    <% end %>
    <%= f.file_field :header_image, accept: "image/*" %>
  </div>

  <div>
    <label>タグ</label><br>
    <%= f.collection_check_boxes(:tag_ids, Tag.all.order(:name), :id, :name) do |b| %>
      <label><%= b.check_box %> <%= b.text %></label>
    <% end %>
  </div>

  <div>
    <%= f.submit blog.persisted? ? "更新" : "作成" %>
  </div>
<% end %>
